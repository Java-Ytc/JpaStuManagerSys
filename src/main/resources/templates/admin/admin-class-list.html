<!-- admin-class-list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>管理员班级列表</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      margin: 0;
      padding: 20px;
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 20px;
    }

    a {
      color: #007BFF;
      text-decoration: none;
      margin-right: 10px;
    }

    a:hover {
      text-decoration: underline;
    }

    form {
      background-color: #fff;
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    label {
      display: inline-block;
      margin-right: 5px;
    }

    input[type="text"] {
      padding: 8px;
      margin-right: 10px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    button {
      padding: 8px 15px;
      background-color: #007BFF;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }

    th, td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background-color: #f2f2f2;
    }

    tr:hover {
      background-color: #f5f5f5;
    }

    .pagination {
      margin-top: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
<h1>管理员班级列表</h1>
<!-- 添加返回管理员主页的链接 -->
<a href="/admin/dashboard">返回管理员主页</a>
<a href="/admin/classes/add">添加新班级</a>
<form action="/admin/classes" method="get">
  <label for="classCode">班级编号:</label>
  <input type="text" id="classCode" name="classCode" th:value="${param.classCode}">
  <label for="className">班级名称:</label>
  <input type="text" id="className" name="className" th:value="${param.className}">
  <button type="submit">查询</button>
</form>
<form action="/admin/classes/delete" method="post">
  <table>
    <thead>
    <tr>
      <!-- 添加一个全选的复选框，能够选中全部的数据 -->
      <th>
        <label for="selectAll">全选</label>
        <input type="checkbox" id="selectAll"/>
      </th>
      <th>班级编号</th>
      <th>班级名称</th>
      <th>学生数量</th>
      <th>操作</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="clazz : ${classes}">
      <td>
        <label th:for="${'checkbox_' + clazz.classCode}">选择</label>
        <input type="checkbox" id="${'checkbox_' + clazz.classCode}" name="classCodes" th:value="${clazz.classCode}"/>
      </td>
      <td th:text="${clazz.classCode}"></td>
      <td th:text="${clazz.className}"></td>
      <td th:text="${clazz.students != null && !clazz.students.isEmpty() ? clazz.students.size() : '没有学生'}"></td>
      <td>
        <a th:href="@{/admin/classes/edit/{classCode}(classCode=${clazz.classCode})}">编辑</a>
        <!-- 添加分配学生的链接 -->
        <a th:href="@{/admin/classes/{classCode}/assign-students(classCode=${clazz.classCode})}">分配学生</a>
      </td>
    </tr>
    </tbody>
  </table>
  <button type="submit">删除选中项</button>
</form>
<div class="pagination">
  <a th:href="@{/admin/classes(page=${currentPage - 1})}" th:if="${currentPage > 0}">上一页</a>
  <!-- 新增显示当前页码和总页数 -->
  <span th:text="${'第 ' + (currentPage + 1) + ' 页，共 ' + totalPages + ' 页'}"></span>
  <a th:href="@{/admin/classes(page=${currentPage + 1})}" th:if="${currentPage < totalPages - 1}">下一页</a>
</div>
<script>
  document.getElementById('selectAll').addEventListener('change', function () {
    // 通过 classCode 选中全部的数据
    const checkboxes = document.querySelectorAll('input[name="classCodes"]');
    checkboxes.forEach((checkbox) => {
      checkbox.checked = this.checked;
    });
  });
</script>
</body>
</html>